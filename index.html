<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Portofolio - Zhyllan Fyllah</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.6.0/css/all.min.css" integrity="sha384-5Xk5wv5ftTPbhkY9L1OzU6VXxY8RrJqKZJcY6QvVH8M8vqkWZqVgEF6Qe3v5O8" crossorigin="anonymous">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    :root {
      --bg-primary: #0f0c14; /* Warna gelap ungu-hitam */
      --bg-secondary: #15121a;
      --text-primary: #e0e0e0;
      --text-secondary: #9e9ea8;
      --accent: #3498db;
      --card-bg: #1a1720;
      --border-radius: 12px;
      --sidebar-width: 80px;
    }

    body, html {
      background: var(--bg-primary);
      color: var(--text-primary);
      height: 100%;
      scroll-behavior: smooth;
      overflow-x: hidden;
      position: relative; /* Diperlukan untuk z-index visualizer */
      /* Efek RGB border (akan aktif saat tidak ada visualisasi musik) */
      border: 3px solid transparent;
      border-radius: 8px; /* Opsional */
      background-image: linear-gradient(var(--bg-primary), var(--bg-primary)), linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);
      background-origin: border-box;
      background-clip: padding-box, border-box;
      background-size: 100% 100%;
      animation: rgbBorder 8s linear infinite;
      animation-play-state: paused; /* Dijeda secara default */
    }

    @keyframes rgbBorder {
      0% { filter: hue-rotate(0deg); }
      100% { filter: hue-rotate(360deg); }
    }

    /* Container untuk visualisasi suara */
    #visualizerContainer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 100px; /* Tinggi visualizer */
      pointer-events: none; /* Agar tidak menghalangi klik */
      z-index: 999; /* Di atas konten utama, di bawah menu */
      display: none; /* Sembunyikan secara default */
    }

    /* Canvas untuk menggambar visualisasi */
    #visualizerCanvas {
      width: 100%;
      height: 100%;
    }

    /* Background Visual TKJ */
    .tkj-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        linear-gradient(135deg, rgba(16, 12, 24, 0.8), rgba(10, 6, 18, 0.9)),
        url('https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&auto=format&fit=crop&w=1950&q=80') center / cover no-repeat;
      z-index: -1;
    }

    /* Floating Menu Container */
    .floating-menu-container {
      position: fixed;
      top: 50%;
      left: 20px; /* Atau right: 20px; jika ingin di kanan */
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 15px; /* Jarak antar tombol */
      z-index: 1000;
    }

    .music-control {
      width: 60px; /* Lebih besar agar sejajar dengan tombol menu */
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid var(--accent);
      border-radius: 50%;
      background: var(--bg-secondary);
      cursor: pointer;
      font-size: 20px;
      color: var(--accent);
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3); /* Bayangan default */
    }

    .music-control:hover {
        background: var(--accent);
        color: white;
        box-shadow: 0 6px 12px rgba(52, 152, 219, 0.4); /* Bayangan lebih besar saat hover */
    }

    .nav-icons {
      display: flex;
      flex-direction: column;
      gap: 15px; /* Jarak antar tombol */
    }

    .nav-icon {
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--bg-secondary);
      border: 2px solid transparent; /* Awalnya tidak ada border */
      border-radius: 50%;
      cursor: pointer;
      font-size: 24px;
      color: var(--text-secondary);
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55); /* Animasi bouncing */
      box-shadow: 0 4px 8px rgba(0,0,0,0.3); /* Bayangan default */
      position: relative;
      opacity: 0;
      transform: translateX(-100px); /* Mulai dari kiri */
    }

    .nav-icon.active {
      border-color: var(--accent);
      color: white;
      background: var(--accent);
      z-index: 1001; /* Di atas yang lain saat aktif */
      transform: scale(1.1); /* Sedikit membesar saat aktif */
      box-shadow: 0 0 15px rgba(52, 152, 219, 0.7); /* Bayangan saat aktif */
    }

    .nav-icon:hover:not(.active) { /* Efek hover hanya untuk yang tidak aktif */
        color: white;
        background: var(--accent);
        box-shadow: 0 6px 12px rgba(52, 152, 219, 0.5); /* Bayangan lebih besar saat hover */
    }

    .nav-icon:nth-child(1) { transition-delay: 0.1s; }
    .nav-icon:nth-child(2) { transition-delay: 0.2s; }
    .nav-icon:nth-child(3) { transition-delay: 0.3s; }

    /* Animasi masuk */
    .nav-icon.animate-in {
      opacity: 1;
      transform: translateX(0);
    }

    /* Animasi keluar */
    .nav-icon.animate-out {
      opacity: 0;
      transform: translateX(-100px) translateY(-20px) rotate(-15deg); /* Melayang ke kiri dan atas */
    }

    /* Konten Utama - margin disesuaikan dengan posisi menu mengambang */
    .main-area {
      margin-left: 100px; /* Lebih besar dari ukuran tombol untuk jarak */
      padding: 30px;
      min-height: 100vh;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.7s ease-out forwards;
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .profile-section {
      background: rgba(26, 23, 32, 0.7);
      backdrop-filter: blur(10px);
      padding: 30px;
      margin-bottom: 30px;
      border-radius: var(--border-radius);
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .profile-section img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      border: 3px solid var(--accent);
      object-fit: cover;
    }

    .profile-section .profile-info {
      flex: 1;
    }

    .profile-section .profile-info h2 {
      font-size: 24px;
      margin-bottom: 5px;
      color: var(--accent);
    }

    .profile-section .profile-info p {
      color: var(--text-secondary);
      margin-bottom: 10px;
    }

    .profile-section .profile-info ul {
        padding-left: 20px;
        color: var(--text-secondary);
    }

    .content-section {
      background: rgba(26, 23, 32, 0.7);
      backdrop-filter: blur(10px);
      padding: 30px;
      margin-bottom: 30px;
      border-radius: var(--border-radius);
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }

    .content-section h2 {
      font-size: 24px;
      margin-bottom: 15px;
      color: var(--accent);
      padding-bottom: 8px;
      border-bottom: 2px solid #333;
    }

    ul {
      padding-left: 20px;
    }

    li {
      margin-bottom: 10px;
      color: var(--text-secondary);
    }

    footer {
      text-align: center;
      padding: 20px;
      background: var(--bg-secondary);
      color: var(--text-secondary);
      font-size: 14px;
      margin-top: 20px;
      border-top: 1px solid #333;
    }

    .logo {
      font-weight: bold;
      color: var(--accent);
      margin-bottom: 8px;
      font-size: 18px;
    }

    /* Modal Umum */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 2000;
      justify-content: center;
      align-items: flex-end;
      padding: 20px;
    }

    .modal-content {
      background: var(--card-bg);
      max-width: 800px;
      width: 100%;
      border-radius: var(--border-radius);
      padding: 30px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.7);
      transform: translateY(100%);
      opacity: 0;
      transition: transform 0.4s ease, opacity 0.4s ease;
      max-height: 80vh;
      overflow-y: auto;
      color: var(--text-primary);
    }

    .modal.active .modal-content {
      transform: translateY(0);
      opacity: 1;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .btn-kembali {
      background: var(--accent);
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
    }

    /* Popup Bahasa */
    #langModal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.85);
      z-index: 3000;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .lang-modal-content {
      background: var(--card-bg);
      max-width: 400px;
      width: 100%;
      border-radius: 12px;
      padding: 30px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    }

    .lang-btn {
      display: block;
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: opacity 0.3s;
    }
    .lang-btn:hover {
      opacity: 0.9;
    }

    /* Responsif Mobile */
    @media (max-width: 768px) {
      .floating-menu-container {
        top: auto;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        flex-direction: row;
        gap: 10px;
        width: auto;
        max-width: 90%;
      }

      .nav-icons {
        flex-direction: row;
      }

      .nav-icon {
            width: 50px;
            height: 50px;
            font-size: 20px;
            transform: translateY(100px); /* Mulai dari bawah */
        }

      .nav-icon.animate-in {
            transform: translateY(0);
        }

      .nav-icon.animate-out {
            transform: translateY(100px) translateX(-20px) rotate(15deg); /* Melayang ke bawah dan kiri */
        }

      .music-control {
        width: 50px;
        height: 50px;
        font-size: 18px;
      }

      .main-area {
        margin-left: 0;
        padding: 20px 16px;
      }

      .profile-section {
        flex-direction: column;
        text-align: center;
        align-items: center;
      }

      .profile-section img {
        margin-bottom: 15px;
      }
    }
  </style>
</head>
<body>

  <!-- Background TKJ -->
  <div class="tkj-background"></div>

  <!-- Container untuk Visualisasi Suara -->
  <div id="visualizerContainer">
    <canvas id="visualizerCanvas"></canvas>
  </div>

  <!-- Popup Bahasa -->
  <div id="langModal" class="modal">
    <div class="lang-modal-content">
      <h2 style="margin-bottom: 20px; color: var(--accent);">Pilih Bahasa / Choose Language</h2>
      <button class="lang-btn" onclick="setLanguage('id')">🇮🇩 Bahasa Indonesia</button>
      <button class="lang-btn" onclick="setLanguage('en')">🇬🇧 English</button>
    </div>
  </div>

  <div id="mainContent" style="display: none;">

    <!-- Floating Menu Container -->
    <div class="floating-menu-container">
      <!-- Tombol Musik -->
      <div class="music-control" onclick="toggleMusic()" id="musicBtn">
        <i class="fas fa-play"></i>
      </div>

      <!-- Navigasi Ikon -->
      <div class="nav-icons">
        <button class="nav-icon active" onclick="bukaProfil()" id="icon-profil">
          <i class="fas fa-user"></i>
        </button>
        <button class="nav-icon" onclick="bukaPendidikan(event)" id="icon-edu">
          <i class="fas fa-graduation-cap"></i>
        </button>
        <!-- Tambahkan tombol lain jika diperlukan -->
        <!-- <button class="nav-icon" onclick="bukaTentang()">
          <i class="fas fa-info-circle"></i>
        </button> -->
      </div>
    </div>

    <!-- Konten Utama -->
    <main class="main-area">
      <!-- Profil Section - Ditampilkan di halaman utama -->
      <div class="profile-section">
        <img src="profile/profile.jpg" alt="Foto Profil Zhyllan Fyllah">
        <div class="profile-info">
          <h2 id="main-profile-name">Zhyllan Fyllah</h2>
          <p id="main-profile-major">Teknik Komputer dan Jaringan</p>
          <ul id="main-profile-contact">
            <li>Email: <a href="mailto:zhyllanf@gmail.com">zhyllanf@gmail.com</a></li>
            <li>WhatsApp: <a href="https://wa.me/6283831425337" target="_blank">+62 838-3142-5337</a></li>
            <li>Lokasi: Ujunggading, Lembah Melintang, Indonesia</li>
          </ul>
        </div>
      </div>

      <div class="content-section">
        <h2 id="txt-summary-title">RINGKASAN</h2>
        <p id="txt-summary">
          Nama saya Zhyllan Fyllah. Saya telah menempuh pendidikan dasar dan menengah selama 9 tahun. Saat ini, saya sedang menempuh pendidikan di SMK N 1 Lembah Melintang, jurusan Teknik Komputer dan Jaringan (TKJ). Sekolah ini merupakan satu-satunya SMK unggulan di wilayah Ujunggading, yang dikenal baik dari segi kualitas mengajar, pembelajaran, maupun praktik kejuruan, serta memiliki enam program keahlian.
        </p>
      </div>

      <div class="content-section">
        <h2 id="txt-skills-title">KEAHLIAN DAN KOMPETENSI</h2>
        <ul id="txt-skills-list">
          <li>Teknik Komputer dan Jaringan</li>
          <li>Penetrasi Jaringan Seluler</li>
          <li>Web Development</li>
          <li>Pengembangan Aplikasi (APK)</li>
          <li>Menguasai Bahasa Pemrograman CSS dan HTML</li>
        </ul>
      </div>

      <footer>
        <div class="logo">ZhyllanFyllah.dev</div>
        &copy; 2025 Zhyllan Fyllah  
        Hosted on GitHub Pages  
        Dikembakan dengan CINTA dan dibangun dengan KASIH dan SAYANG, di bantu oleh <strong>Qwen3-Coder</strong>.
      </footer>
    </main>

    <!-- Modal Profil -->
    <div id="modalProfil" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <button class="btn-kembali" onclick="tutupProfil()">← Kembali</button>
          <h2 id="modal-profil-title">PROFIL LENGKAP</h2>
        </div>
        <div style="text-align: center; margin-bottom: 20px;">
          <div style="width: 120px; height: 120px; margin: 0 auto; border-radius: 50%; overflow: hidden; border: 3px solid var(--accent);">
            <img src="profile/profile.jpg" alt="Foto Profil" style="width:100%; height:100%; object-fit:cover;">
          </div>
          <h3 style="margin-top: 15px; color: white;" id="modal-name">Zhyllan Fyllah</h3>
          <p style="color: var(--text-secondary);" id="modal-major">Teknik Komputer dan Jaringan</p>
        </div>
        <h3 id="modal-contact-title">Kontak</h3>
        <ul id="modal-contact-list">
          <li>Email: <a href="mailto:zhyllanf@gmail.com">zhyllanf@gmail.com</a></li>
          <li>WhatsApp: <a href="https://wa.me/6283831425337" target="_blank">+62 838-3142-5337</a></li>
          <!-- LinkedIn dihapus dari sini sesuai permintaan -->
          <li>Lokasi: Ujunggading, Lembah Melintang, Indonesia</li>
        </ul>
        <h3 id="modal-about-title">Tentang Saya</h3>
        <p id="modal-about-text">
          Saya seorang siswa SMK yang bersemangat di bidang teknologi, jaringan, dan pengembangan perangkat lunak. Aktif di komunitas Linux dan tertarik pada keamanan jaringan serta pengembangan aplikasi mobile.
        </p>
      </div>
    </div>

    <!-- Modal Pendidikan -->
    <div id="modalPendidikan" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <button class="btn-kembali" onclick="tutupPendidikan()">← Kembali</button>
          <h2 id="modal-edu-title">RIWAYAT PENDIDIKAN</h2>
        </div>
        <div id="modal-edu-content-id" style="display: block;">
          <h3>Pendidikan Formal</h3>
          <ul>
            <li><strong>Sekolah Dasar:</strong> MIS Muhammadiyah Tamiang, Ujunggading, Lembah Melintang (2016–2021)</li>
            <li>
              <strong>Sekolah Menengah Pertama:</strong> SMP Tahfidz Al-Qur'an An-Naajiya, Jambak Jalur 3 Timur, Simpang Empat (2021–2025)<br>
              • Menjabat sebagai Ketua OSIS Bidang Pengelolaan Perangkat Laboratorium Komputer (2023–2024)
            </li>
            <li><strong>Sekolah Menengah Kejuruan:</strong> SMK N 1 Lembah Melintang (2025–sekarang)</li>
          </ul>

          <h3>Pendidikan Non-Formal</h3>
          <ul>
            <li>Aktif di Komunitas Linux Ubuntu Indonesia (2021–sekarang)</li>
            <li>Aktif di Komunitas Nusantara Project ROM (2020–sekarang)</li>
            <li>Menempuh Pembelajaran Online Di Situs Dicoding.com (2024–sekarang)</li>
          </ul>
        </div>
        <div id="modal-edu-content-en" style="display: none;">
          <h3>Formal Education</h3>
          <ul>
            <li><strong>Elementary School:</strong> MIS Muhammadiyah Tamiang, Ujunggading, Lembah Melintang (2016–2021)</li>
            <li>
              <strong>Junior High School:</strong> SMP Tahfidz Al-Qur'an An-Naajiya, Jambak Jalur 3 Timur, Simpang Empat (2021–2025)<br>
              • Served as OSIS Chairperson for Computer Lab Equipment Management Division (2023–2024)
            </li>
            <li><strong>Vocational High School:</strong> SMK N 1 Lembah Melintang (2025–present)</li>
          </ul>

          <h3>Non-Formal Education</h3>
          <ul>
            <li>Active in Linux Ubuntu Indonesia Community (2021–present)</li>
            <li>Active in Nusantara Project ROM Community (2020–present)</li>
            <li>Online Learning at Dicoding.com (2024–present)</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Audio -->
    <audio id="bgMusic" loop>
      <source src="music/bg.mp3" type="audio/mpeg">
    </audio>
  </div>

  <script>
    // --- TRANSLATIONS & LOGIC ---
    const translations = {
      id: {
        summaryTitle: "RINGKASAN",
        summary: "Nama saya Zhyllan Fyllah. Saya telah menempuh pendidikan dasar dan menengah selama 9 tahun. Saat ini, saya sedang menempuh pendidikan di SMK N 1 Lembah Melintang, jurusan Teknik Komputer dan Jaringan (TKJ). Sekolah ini merupakan satu-satunya SMK unggulan di wilayah Ujunggading, yang dikenal baik dari segi kualitas mengajar, pembelajaran, maupun praktik kejuruan, serta memiliki enam program keahlian.",
        skillsTitle: "KEAHLIAN DAN KOMPETENSI",
        skillsList: [
          "Teknik Komputer dan Jaringan",
          "Penetrasi Jaringan Seluler",
          "Web Development",
          "Pengembangan Aplikasi (APK)",
          "Menguasai Bahasa Pemrograman CSS dan HTML"
        ],
        modalProfilTitle: "PROFIL LENGKAP",
        modalName: "Zhyllan Fyllah",
        modalMajor: "Teknik Komputer dan Jaringan",
        modalContactTitle: "Kontak",
        modalContactList: [
          "Email: <a href='mailto:zhyllanf@gmail.com'>zhyllanf@gmail.com</a>",
          "WhatsApp: <a href='https://wa.me/6283831425337' target='_blank'>+62 838-3142-5337</a>",
          "Lokasi: Ujunggading, Lembah Melintang, Indonesia"
        ],
        modalAboutTitle: "Tentang Saya",
        modalAboutText: "Saya seorang siswa SMK yang bersemangat di bidang teknologi, jaringan, dan pengembangan perangkat lunak. Aktif di komunitas Linux dan tertarik pada keamanan jaringan serta pengembangan aplikasi mobile.",
        modalEduTitle: "RIWAYAT PENDIDIKAN",
        musicPlay: "fas fa-play",
        musicPause: "fas fa-pause",
        mainProfileName: "Zhyllan Fyllah",
        mainProfileMajor: "Teknik Komputer dan Jaringan",
        mainProfileContact: [
          "Email: <a href='mailto:zhyllanf@gmail.com'>zhyllanf@gmail.com</a>",
          "WhatsApp: <a href='https://wa.me/6283831425337' target='_blank'>+62 838-3142-5337</a>",
          "Lokasi: Ujunggading, Lembah Melintang, Indonesia"
        ]
      },
      en: {
        summaryTitle: "SUMMARY",
        summary: "My name is Zhyllan Fyllah. I completed 9 years of basic and secondary education. Currently, I am studying at SMK N 1 Lembah Melintang, majoring in Computer and Network Engineering (TKJ). This school is the only leading vocational high school in Ujunggading, known for its teaching quality, learning methods, and vocational practices, with six specialization programs.",
        skillsTitle: "SKILLS & COMPETENCIES",
        skillsList: [
          "Computer and Network Engineering",
          "Mobile Network Penetration",
          "Web Development",
          "Mobile Application Development (APK)",
          "Proficient in CSS and HTML programming languages"
        ],
        modalProfilTitle: "FULL PROFILE",
        modalName: "Zhyllan Fyllah",
        modalMajor: "Computer and Network Engineering",
        modalContactTitle: "Contact",
        modalContactList: [
          "Email: <a href='mailto:zhyllanf@gmail.com'>zhyllanf@gmail.com</a>",
          "WhatsApp: <a href='https://wa.me/6283831425337' target='_blank'>+62 838-3142-5337</a>",
          "Lokasi: Ujunggading, Lembah Melintang, Indonesia"
        ],
        modalAboutTitle: "About Me",
        modalAboutText: "I am a passionate vocational high school student in technology, networking, and software development. I am active in the Linux community and interested in network security and mobile app development.",
        modalEduTitle: "EDUCATION HISTORY",
        musicPlay: "fas fa-play",
        musicPause: "fas fa-pause",
        mainProfileName: "Zhyllan Fyllah",
        mainProfileMajor: "Computer and Network Engineering",
        mainProfileContact: [
          "Email: <a href='mailto:zhyllanf@gmail.com'>zhyllanf@gmail.com</a>",
          "WhatsApp: <a href='https://wa.me/6283831425337' target='_blank'>+62 838-3142-5337</a>",
          "Lokasi: Ujunggading, Lembah Melintang, Indonesia"
        ]
      }
    };

    // --- VISUALIZER LOGIC ---
    let audioContext, analyser, audioSource, dataArray, canvas, canvasCtx, animationId;
    const visualizerContainer = document.getElementById('visualizerContainer');
    const visualizerCanvas = document.getElementById('visualizerCanvas');
    canvasCtx = visualizerCanvas.getContext('2d');

    function setupVisualizer() {
        if (!audioContext) {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            analyser = audioContext.createAnalyser();
            audioSource = audioContext.createMediaElementSource(document.getElementById('bgMusic'));
            audioSource.connect(analyser);
            analyser.connect(audioContext.destination);
            analyser.fftSize = 256;
            const bufferLength = analyser.frequencyBinCount;
            dataArray = new Uint8Array(bufferLength);
        }
    }

    function drawVisualizer() {
        if (!analyser || !canvasCtx) return;

        const bufferLength = analyser.frequencyBinCount;
        analyser.getByteFrequencyData(dataArray);

        canvasCtx.clearRect(0, 0, canvasCtx.canvas.width, canvasCtx.canvas.height);

        const barWidth = (canvasCtx.canvas.width / bufferLength) * 2.5;
        let barHeight;
        let x = 0;

        for (let i = 0; i < bufferLength; i++) {
            barHeight = dataArray[i] / 2; // Skala tinggi bar

            // Warna gradasi
            const gradient = canvasCtx.createLinearGradient(0, canvasCtx.canvas.height - barHeight, 0, canvasCtx.canvas.height);
            gradient.addColorStop(0, '#3498db'); // Biru aksen
            gradient.addColorStop(1, '#e0e0e0'); // Abu-abu terang

            canvasCtx.fillStyle = gradient;
            canvasCtx.fillRect(x, canvasCtx.canvas.height - barHeight, barWidth, barHeight);

            x += barWidth + 1;
        }

        animationId = requestAnimationFrame(drawVisualizer);
    }

    function startVisualizer() {
        setupVisualizer();
        if (audioContext.state === 'suspended') {
            audioContext.resume();
        }
        // Atur ukuran canvas saat dimulai
        canvasCtx.canvas.width = visualizerContainer.clientWidth;
        canvasCtx.canvas.height = visualizerContainer.clientHeight;
        visualizerContainer.style.display = 'block';
        drawVisualizer();
    }

    function stopVisualizer() {
        if (animationId) {
            cancelAnimationFrame(animationId);
            animationId = null;
        }
        visualizerContainer.style.display = 'none';
    }

    // --- MUSIC LOGIC ---
    function toggleMusic() {
        const audio = document.getElementById('bgMusic');
        const lang = localStorage.getItem('userLang') || 'id';
        const t = translations[lang];
        const btn = document.getElementById('musicBtn');

        if (audio.paused) {
            audio.play()
                .then(() => {
                    btn.innerHTML = `<i class="${t.musicPause}"></i>`;
                    startVisualizer(); // Aktifkan visualisasi saat diputar
                    document.body.style.animationPlayState = 'paused'; // Jeda efek RGB saat visualisasi aktif
                })
                .catch(e => {
                    console.error('Gagal memutar musik:', e);
                    alert('Gagal memutar musik. Silakan coba lagi atau periksa file: music/bg.mp3');
                    // Jika gagal, aktifkan efek RGB sebagai fallback
                    document.body.style.animationPlayState = 'running';
                });
        } else {
            audio.pause();
            btn.innerHTML = `<i class="${t.musicPlay}"></i>`;
            stopVisualizer(); // Hentikan visualisasi saat dijeda
            document.body.style.animationPlayState = 'running'; // Aktifkan efek RGB saat musik tidak diputar
        }
    }

    // --- TRANSLATION & OTHER LOGIC ---
    function initLanguage() {
      const saved = localStorage.getItem('userLang');
      if (saved && translations[saved]) {
        applyLanguage(saved);
        document.getElementById('mainContent').style.display = 'block';
        // Animasi menu masuk
        setTimeout(() => {
            document.querySelectorAll('.nav-icon').forEach(icon => {
                icon.classList.add('animate-in');
            });
        }, 300);
        // Set awal efek RGB dijeda (karena musik belum diputar)
        document.body.style.animationPlayState = 'paused';
      } else {
        document.getElementById('langModal').style.display = 'flex';
      }
    }

    function setLanguage(lang) {
      if (translations[lang]) {
        localStorage.setItem('userLang', lang);
        applyLanguage(lang);
        document.getElementById('langModal').style.display = 'none';
        document.getElementById('mainContent').style.display = 'block';
        // Animasi menu masuk
        setTimeout(() => {
            document.querySelectorAll('.nav-icon').forEach(icon => {
                icon.classList.add('animate-in');
            });
        }, 300);
        document.body.style.animationPlayState = 'paused';
      }
    }

    function applyLanguage(lang) {
      const t = translations[lang];
      document.documentElement.lang = lang;

      // Main content
      document.getElementById('txt-summary-title').textContent = t.summaryTitle;
      document.getElementById('txt-summary').textContent = t.summary;
      document.getElementById('txt-skills-title').textContent = t.skillsTitle;

      const skillsList = document.getElementById('txt-skills-list');
      skillsList.innerHTML = '';
      t.skillsList.forEach(item => {
        const li = document.createElement('li');
        li.textContent = item;
        skillsList.appendChild(li);
      });

      // Main Profile Section
      document.getElementById('main-profile-name').textContent = t.mainProfileName;
      document.getElementById('main-profile-major').textContent = t.mainProfileMajor;
      const mainContactList = document.getElementById('main-profile-contact');
      mainContactList.innerHTML = '';
      t.mainProfileContact.forEach(item => {
        const li = document.createElement('li');
        li.innerHTML = item;
        mainContactList.appendChild(li);
      });

      // Modal Profil
      document.getElementById('modal-profil-title').textContent = t.modalProfilTitle;
      document.getElementById('modal-name').textContent = t.modalName;
      document.getElementById('modal-major').textContent = t.modalMajor;
      document.getElementById('modal-contact-title').textContent = t.modalContactTitle;

      const contactList = document.getElementById('modal-contact-list');
      contactList.innerHTML = '';
      t.modalContactList.forEach(item => {
        const li = document.createElement('li');
        li.innerHTML = item;
        contactList.appendChild(li);
      });

      document.getElementById('modal-about-title').textContent = t.modalAboutTitle;
      document.getElementById('modal-about-text').textContent = t.modalAboutText;

      // Modal Edu
      document.getElementById('modal-edu-title').textContent = t.modalEduTitle;
      if (lang === 'id') {
        document.getElementById('modal-edu-content-id').style.display = 'block';
        document.getElementById('modal-edu-content-en').style.display = 'none';
      } else {
        document.getElementById('modal-edu-content-id').style.display = 'none';
        document.getElementById('modal-edu-content-en').style.display = 'block';
      }

      // Musik tombol ikon
      const isPlaying = !document.getElementById('bgMusic').paused;
      const btn = document.getElementById('musicBtn');
      btn.innerHTML = `<i class="${isPlaying ? t.musicPause : t.musicPlay}"></i>`;
      // Set awal efek RGB berdasarkan status musik
      if (isPlaying) {
          document.body.style.animationPlayState = 'paused';
          startVisualizer();
      } else {
          document.body.style.animationPlayState = 'running';
          stopVisualizer();
      }
    }

    // Modal Handlers
    const modalProfil = document.getElementById('modalProfil');
    const modalPendidikan = document.getElementById('modalPendidikan');

    function bukaProfil() {
      // Ambil ikon aktif sebelum membuka modal
      const activeIcon = document.querySelector('.nav-icon.active');
      if (activeIcon) activeIcon.classList.remove('active');
      document.getElementById('icon-profil').classList.add('active');
      // Animasi menu keluar
      document.querySelectorAll('.nav-icon').forEach(icon => {
          icon.classList.remove('animate-in');
          icon.classList.add('animate-out');
      });
      modalProfil.style.display = 'flex';
      setTimeout(() => modalProfil.classList.add('active'), 10);
      document.body.style.overflow = 'hidden';
    }

    function tutupProfil() {
      modalProfil.classList.remove('active');
      setTimeout(() => {
        modalProfil.style.display = 'none';
        document.body.style.overflow = '';
        // Animasi menu masuk kembali
        setTimeout(() => {
            document.querySelectorAll('.nav-icon').forEach(icon => {
                icon.classList.remove('animate-out');
                icon.classList.add('animate-in');
            });
        }, 10);
      }, 400);
    }

    function bukaPendidikan(e) {
      e.preventDefault();
      // Ambil ikon aktif sebelum membuka modal
      const activeIcon = document.querySelector('.nav-icon.active');
      if (activeIcon) activeIcon.classList.remove('active');
      document.getElementById('icon-edu').classList.add('active');
      // Animasi menu keluar
      document.querySelectorAll('.nav-icon').forEach(icon => {
          icon.classList.remove('animate-in');
          icon.classList.add('animate-out');
      });
      modalPendidikan.style.display = 'flex';
      setTimeout(() => modalPendidikan.classList.add('active'), 10);
      document.body.style.overflow = 'hidden';
    }

    function tutupPendidikan() {
      modalPendidikan.classList.remove('active');
      setTimeout(() => {
        modalPendidikan.style.display = 'none';
        document.body.style.overflow = '';
        // Animasi menu masuk kembali
        setTimeout(() => {
            document.querySelectorAll('.nav-icon').forEach(icon => {
                icon.classList.remove('animate-out');
                icon.classList.add('animate-in');
            });
        }, 10);
      }, 400);
    }

    window.onclick = function(event) {
      if (event.target === modalProfil) tutupProfil();
      if (event.target === modalPendidikan) tutupPendidikan();
    };

    window.onload = initLanguage;

    // Perbarui ukuran canvas saat window diresize
    window.addEventListener('resize', function() {
        if (visualizerContainer.style.display === 'block' && canvasCtx) {
            canvasCtx.canvas.width = visualizerContainer.clientWidth;
            canvasCtx.canvas.height = visualizerContainer.clientHeight;
        }
    });
  </script>
</body>
</html>